<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinity Castle FX</title>
<style>
    body {
        margin:0;
        overflow:hidden;
        background:black;
        font-family:Arial;
        color:white;
    }

    /* =========================
        PARALLAX LAYER
    ==========================*/
    .layer{
        position:absolute;
        width:200%;
        height:200%;
        top:-50%;
        left:-50%;
        background-repeat:repeat;
        animation: floatLayer 40s linear infinite;
        opacity:0.25;
    }
    #layer1{ background-image:url("https://i.imgur.com/1qQ9EXM.png"); animation-duration:35s; }
    #layer2{ background-image:url("https://i.imgur.com/VszTn6e.png"); animation-duration:50s; opacity:0.18;}
    #layer3{ background-image:url("https://i.imgur.com/cl8fO1v.png"); animation-duration:70s; opacity:0.1;}

    @keyframes floatLayer{
        from{ transform:translateX(0);}
        to{ transform:translateX(-20%);}
    }

    /* =========================
        VERTICAL LIGHT BEAMS
    ==========================*/
    .beam{
        position:absolute;
        top:0;
        width:4px;
        height:100vh;
        background:linear-gradient(to bottom, rgba(255,255,255,0.8), rgba(255,255,255,0));
        opacity:0.4;
        animation: beamMove 4s linear infinite;
        filter:blur(1px);
    }
    @keyframes beamMove{
        from{ transform:translateY(-100%); }
        to{ transform:translateY(100%); }
    }

    /* =========================
        PARTICLE SHARDS
    ==========================*/
    .particle{
        position:absolute;
        width:6px; height:6px;
        background:white;
        opacity:0.7;
        animation: particleFly 3s linear infinite;
    }
    @keyframes particleFly{
        from{ transform:translateY(0) scale(1); opacity:1; }
        to{ transform:translateY(-200px) scale(0.2); opacity:0; }
    }

    /* =========================
        CASTLE COLLAPSE MODE
    ==========================*/
    .shake{
        animation: shakeScreen 0.15s infinite;
    }
    @keyframes shakeScreen{
        0%{ transform:translate(0,0); }
        25%{ transform:translate(3px,-3px); }
        50%{ transform:translate(-3px,3px); }
        75%{ transform:translate(4px,2px); }
        100%{ transform:translate(0,0); }
    }
    .flash{
        position:absolute;
        width:100%;
        height:100%;
        background:red;
        top:0; left:0;
        opacity:0;
        animation: flashRed 0.2s linear infinite;
        z-index:999;
    }
    @keyframes flashRed{
        0%{ opacity:0; }
        50%{ opacity:0.25; }
        100%{ opacity:0; }
    }

    /* =========================
        BUTTON MODE
    ==========================*/
    .btnToggle{
        position:absolute;
        z-index:1000;
        top:20px; right:20px;
        padding:10px 18px;
        background:#222;
        color:white;
        border:1px solid white;
        cursor:pointer;
        font-size:14px;
        border-radius:4px;
    }
</style>
</head>
<body>

<button class="btnToggle" onclick="castleCollapse()">CASTLE COLLAPSE</button>

<div id="layer1" class="layer"></div>
<div id="layer2" class="layer"></div>
<div id="layer3" class="layer"></div>

<div id="beamContainer"></div>
<div id="particleContainer"></div>
<div id="flashScreen"></div>

<script>
/* =========================
   CREATE LIGHT BEAMS
==========================*/
for(let i=0;i<30;i++){
    const b = document.createElement("div");
    b.className = "beam";
    b.style.left = (Math.random()*100)+"vw";
    b.style.animationDelay = (Math.random()*3)+"s";
    document.getElementById("beamContainer").appendChild(b);
}

/* =========================
   PARTICLE GENERATOR
==========================*/
setInterval(()=>{
    const p = document.createElement("div");
    p.className = "particle";
    p.style.left = (Math.random()*100)+"vw";
    p.style.top = "100vh";
    p.style.animationDuration = (2 + Math.random()*2)+"s";
    document.getElementById("particleContainer").appendChild(p);
    setTimeout(()=>p.remove(),3000);
},90);

/* =========================
   CASTLE COLLAPSE
==========================*/
let collapseActive = false;

function castleCollapse(){
    collapseActive = !collapseActive;

    if(collapseActive){
        document.body.classList.add("shake");
        flashScreen = document.createElement("div");
        flashScreen.className = "flash";
        flashScreen.id = "flash";
        document.body.appendChild(flashScreen);
    } else {
        document.body.classList.remove("shake");
        const f = document.getElementById("flash");
        if(f) f.remove();
    }
}
</script>

</body>
</html>
